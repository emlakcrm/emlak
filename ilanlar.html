<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>İlanlarımız</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .ilan-kutusu {
            border: 2px solid #007bff; /* Mavi Çerçeve */
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            background-color: #f0f8ff; /* Açık Mavi Arka Plan */
        }
        .ilan-baslik {
            color: #333;
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 5px;
        
        .ilan-link a {
            color: #e91e63; /* Pembe Link Rengi */
            text-decoration: none;
            font-weight: bold;
        }
        .ilan-link a:hover {
            text-decoration: underline;
        }
        #ilanlar-listesi {
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <h1>İlanlarımız</h1>
    
    <div id="ilanlar-listesi">
        <p>İlanlar yükleniyor...</p>
    </div>

    <script>
        // * GOOGLE SHEETS LİNKİNİZ BURAYA ENTEGRE EDİLMİŞTİR *
        const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTClx_9DlBcYyCGUNKnmBxvt5f-zKK7PWEFEuFgg7Zk9lR2l2FOlsAoSIrheFT_9dpj1OVYPfh9aNdB/pub?output=csv'; 

        // Veriyi çekme fonksiyonu
        function ilanlariCek() {
            fetch(CSV_URL)
                .then(response => response.text())
                .then(data => {
                    const ilanlar = parseCSV(data); 
                    ilanlariGoster(ilanlar); 
                })
                .catch(error => {
                    document.getElementById('ilanlar-listesi').innerHTML = '<p style="color: red;">İlanlar yüklenirken bir hata oluştu. Lütfen Google Sheets dosyanızın başlıklarını (Baslik, Aciklama, Facebook_Link) ve web\'de yayınlama ayarlarını kontrol edin.</p>';
                });
        }

        // CSV metnini okunaklı bir yapıya dönüştürür (veri okuma motoru)
        function parseCSV(csv) {
            const lines = csv.split('\n').filter(line => line.trim() !== '');
            if (lines.length === 0) return [];
            
            const headers = lines[0].split(',').map(header => header.trim());
            const ilanlar = [];

            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',');
                const ilan = {};
                // Sütun sayısı eşleşiyorsa veriyi işle
                if (values.length === headers.length) {
                    // İlk üç sütunu (Baslik, Aciklama, Facebook_Link) alıyoruz
                    ilan[headers[0]] = values[0].trim();
                    ilan[headers[1]] = values[1].trim();
                    ilanlar.push(ilan);
                }
            }
            // En son eklenen ilan en üstte çıksın diye listeyi ters çeviriyoruz
            return ilanlar.reverse(); 
        }

        // İlanları HTML olarak sayfaya yazar
        function ilanlariGoster(ilanlar) {
            const container = document.getElementById('ilanlar-listesi');
            
            // Başlık satırını hariç tutmak için Baslik değeri 'Baslik' olanları kontrol et
            const gecerliIlanlar = ilanlar.filter(ilan => ilan.Baslik && ilan.Baslik !== 'Baslik');

            if (gecerliIlanlar.length === 0) {
                 container.innerHTML = '<p>Henüz eklenmiş ilan bulunmamaktadır. Lütfen Google Sheets tablonuza yeni ilanlar girin.</p>';
                return;
            }

            let htmlContent = '';
            
            gecerliIlanlar.forEach(ilan => {
                // Her ilan için görsel kutucuğu oluşturulur
                 htmlContent += `
                    <div class="ilan-kutusu">
                        <div class="ilan-baslik">${ilan.Baslik}</div>
                         <div class="ilan-link">
                            <a href="${ilan.Facebook_Link}" target="_blank">Facebook İlanına Git (Tıklayın)</a>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = htmlContent;
        }

        // Sayfa yüklendiğinde ilanları çekmeye başla
        ilanlariCek();
    </script>
</body>
</html>
