<!DOCTYPE html>
<html lang="tr">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QL7NLR92NW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-QL7NLR92NW');
    </script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    
    <title id="page-title">Mahalle Rehberi & Yerel Analizler | Selman Güneş</title>
    <meta name="description" id="meta-desc" content="Türkiye mahalle ve köy rehberi. Selman Güneş tarafından hazırlanan yerel analizler.">
    <meta name="keywords" content="mahalle rehberi, yerel analiz, selman güneş, emlak analiz, mahalle posta kodu, köy rehberi">
    <meta name="author" content="Selman Güneş">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    
    <link rel="canonical" id="dynamic-canonical" href="https://selmangunes.com.tr/mahalle/index.html">
    
    <link rel="publisher" href="https://selmangunes.com.tr/">
    <meta name="geo.region" content="TR-07">
    <meta name="geo.placename" content="Antalya">
    <meta name="theme-color" content="#020617"> 
    <link rel="icon" type="image/png" href="https://selmangunes.com.tr/img/logo.png">

    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Selman Güneş Gayrimenkul">
    <meta property="og:title" id="og-title" content="Selman Güneş | Mahalle Rehberi">
    <meta property="og:description" id="og-desc" content="Türkiye mahalle ve yerel analiz rehberi.">
    <meta property="og:url" id="og-url" content="https://selmangunes.com.tr/mahalle/index.html">
    <meta property="og:image" id="og-image" content="https://selmangunes.com.tr/img/logo.png">

    <script type="application/ld+json" id="schema-data"></script>
    <script type="application/ld+json" id="faq-schema"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <style>
        :root { --gold: #d4af37; --dark: #020617; --dark-accent: #0f172a; --neon: #00f3ff; --text-muted: #94a3b8; }
        body { background: var(--dark); color: #e2e8f0; font-family: 'Inter', sans-serif; padding-top: 80px; overflow-x: hidden; line-height: 1.7; }
        
        /* Navbar */
        .navbar { background: rgba(2, 6, 23, 0.95); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(212, 175, 55, 0.3); }
        .nav-link { color: #cbd5e1 !important; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; margin: 0 8px; transition: all 0.3s ease; }
        .nav-link:hover { color: var(--gold) !important; transform: translateY(-2px); text-shadow: 0 0 10px rgba(212,175,55,0.5); }
        
        /* Cards & Content */
        .glass-card { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(212, 175, 55, 0.15); border-radius: 30px; padding: 50px 40px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.8); margin-bottom: 50px; position: relative; overflow: hidden; }
        h1 { font-family: 'Montserrat', sans-serif; color: var(--gold); font-weight: 900; font-size: clamp(2.2rem, 5vw, 3.5rem); text-align: center; margin-bottom: 1.5rem; letter-spacing: -1px; }
        .section-title { border-left: 4px solid var(--gold); padding-left: 20px; margin-top: 4rem; margin-bottom: 2rem; color: var(--neon); text-transform: uppercase; letter-spacing: 1px; }
        .banner-top { width: 100%; height: 450px; background-size: cover; background-position: center; border-radius: 30px; margin-bottom: 40px; position: relative; border-bottom: 4px solid var(--gold); }
        .banner-overlay { position: absolute; bottom: 30px; left: 30px; background: rgba(2, 6, 23, 0.9); padding: 20px 30px; border-radius: 20px; color: var(--gold); font-weight: 900; font-size: 1.3rem; border: 2px solid var(--gold); backdrop-filter: blur(10px); }
        .content-body { font-size: 1.25rem; color: #ffffff; background: rgba(15, 23, 42, 0.7); padding: 40px; border-radius: 25px; border-left: 5px solid var(--gold); margin-bottom: 40px; }
        .gold-cta { background: linear-gradient(135deg, #d4af37, #b8860b); color: #000 !important; padding: 20px; border-radius: 15px; font-weight: 800; text-align: center; margin: 30px 0; font-size: 1.1rem; display: block; text-decoration: none; box-shadow: 0 10px 30px -10px rgba(212,175,55,0.5); transition: 0.3s; cursor: pointer; }
        .data-widget { background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 25px; padding: 30px 20px; margin-bottom: 20px; text-align: center; height: 100%; }
        .breadcrumb-custom { background: rgba(15, 23, 42, 0.6); padding: 12px 25px; border-radius: 50px; color: var(--text-muted); font-size: 0.9rem; margin-bottom: 30px; border: 1px solid rgba(255,255,255,0.1); display: inline-block; }
        .breadcrumb-custom a { color: var(--gold); text-decoration: none; }
        .pulse { animation: pulse-gold 2s infinite; }
        @keyframes pulse-gold { 0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(212, 175, 55, 0); } 100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); } }
        #qrcode img { margin: 0 auto; border: 5px solid white; border-radius: 10px; }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg fixed-top navbar-dark">
        <div class="container-fluid px-lg-5">
            <a class="navbar-brand fw-bold" href="https://selmangunes.com.tr/">
                <i class="fa fa-map-location-dot me-2"></i>SELMAN <span style="color:var(--gold)">GÜNEŞ</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav ms-auto"> 
                    <a class="nav-link" href="https://selmangunes.com.tr/mahalle/rehber.html">REHBER</a>  
                    <a class="nav-link" href="https://selmangunes.com.tr/index.html">Ana Sayfa</a>  
                    <a class="nav-link" href="https://selmangunes.com.tr/ilanlar.html">İlanlar</a>
                    <a class="nav-link" href="https://selmangunes.com.tr/arayis.html">Talep</a>
                    <a class="nav-link" href="https://selmangunes.com.tr/bilgi/anasayfa.html">Blog</a>
                    <a class="nav-link" href="https://selmangunes.com.tr/hakkimda.html">Hakkımda</a>
                    <a class="nav-link" href="https://selmangunes.com.tr/borcodeme.html">Borç</a>
                    <a class="nav-link" href="https://selmangunes.com.tr/antalya.html">Antalya</a>
                    <a class="nav-link" href="https://selmangunes.com.tr/iletisim.html">İletişim</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div id="dynamic-banner" class="banner-top" data-aos="zoom-in">
            <div class="banner-overlay" id="banner-text">BÖLGE ANALİZİ</div>
        </div>

        <div class="glass-card" data-aos="fade-up">
            <div class="text-center">
                <div class="breadcrumb-custom" id="breadcrumb">
                    <i class="fa fa-globe-europe me-2"></i> <a href="/">Türkiye</a> 
                </div>
            </div>

            <h1 id="main-title">Analiz Ediliyor...</h1>

            <div class="content-body shadow-lg" id="main-content">
                Lütfen bekleyin, mahalle verileri GitHub veri tabanından sorgulanıyor...
            </div>

            <div class="row g-4 mb-5">
                <div class="col-md-4"><div class="data-widget"><i class="fa fa-envelope-open-text fa-3x mb-3" style="color:var(--neon)"></i><h5>Posta Kodu</h5><p id="zip-code" class="fw-bold fs-3">---</p></div></div>
                <div class="col-md-4"><div class="data-widget"><i class="fa fa-shield-halved fa-3x mb-3 text-info"></i><h5>Analiz Yılı</h5><p>2026 Güncel Veri</p></div></div>
                <div class="col-md-4"><div class="data-widget"><i class="fa fa-qrcode fa-3x mb-3 text-white"></i><h5>Paylaş</h5><div id="qrcode"></div></div></div>
            </div>

            <h2 class="section-title">Merak Edilenler</h2>
            <div class="accordion" id="faqAccordion"></div>

            <h2 class="section-title">Konum ve Ulaşım</h2>
            <div class="row g-4">
                <div class="col-lg-8"><div style="border-radius:25px; overflow:hidden; border:3px solid var(--gold); height:450px;"><iframe id="map-frame" width="100%" height="100%" frameborder="0"></iframe></div></div>
                <div class="col-lg-4">
                    <div class="gold-cta h-100 d-flex flex-column justify-content-center" id="btn-route">
                        <i class="fa fa-location-arrow fa-3x mb-3"></i>
                        <h5>Navigasyonu Aç</h5>
                        <p class="small">Google Haritalar ile yol tarifi al</p>
                    </div>
                </div>
            </div>

            <div class="row mt-5">
                <div class="col-12 p-4" style="background:rgba(212,175,55,0.05); border-radius:25px; border:1px solid var(--gold);">
                    <h4 class="text-gold fw-bold mb-3">Yakın Bölgeler</h4>
                    <div class="d-flex flex-wrap gap-2" id="neighbor-links"></div>
                </div>
            </div>

            <div class="gold-cta mt-5 pulse" onclick="window.location.href='tel:05355739260'">
                <i class="fa fa-phone me-2"></i> SELMAN GÜNEŞ İLETİŞİM: 0535 573 92 60
            </div>
        </div>
    </div>

    <footer class="text-center py-5 border-top border-secondary mt-5" style="background:rgba(2, 6, 23, 0.95);">
        <p>© 2026 Selman Güneş. Tüm yerel analiz hakları saklıdır.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <script>
        AOS.init({ duration: 1000 });

        // URL'DEKI AMP VE PARAMETRE HATALARINI TEMIZLEYEN FONKSIYON
        function getCleanUrlParams() {
            const params = new URLSearchParams(window.location.search);
            const cleanData = {};
            params.forEach((value, key) => {
                // "amp;ilce" gibi bozuk keyleri "ilce"ye çevirir
                const cleanKey = key.replace(/^amp;/, '');
                cleanData[cleanKey] = value;
            });
            return cleanData;
        }

        const query = getCleanUrlParams();
        const rawIl = query.il || "Antalya";
        const rawIlce = query.ilce || "";
        const rawMah = query.mah || "";

        function slugify(text) {
            return text.toString().toLowerCase()
                .replace(/ /g, '').replace(/ç/g, 'c').replace(/ğ/g, 'g').replace(/ı/g, 'i').replace(/ö/g, 'o').replace(/ş/g, 's').replace(/ü/g, 'u');
        }

        // Random Banner
        const randomSeed = Math.floor(Math.random() * 9999);
        document.getElementById('dynamic-banner').style.backgroundImage = `linear-gradient(to bottom, rgba(2,6,23,0.3), rgba(2,6,23,1)), url('https://picsum.photos/seed/${randomSeed}/1600/900')`;

        if(rawIl && rawIlce && rawMah) {
            const cleanIl = slugify(rawIl);
            const dataPath = `https://raw.githubusercontent.com/emlakcrm/emlak/main/mahalle/data/${cleanIl}.json`;

            fetch(dataPath)
            .then(res => res.json())
            .then(data => {
                // Karşılaştırma yaparken trim (boşluk temizleme) yapıyoruz
                const item = data.find(x => x.ilce.trim() === rawIlce.trim() && x.mah.trim() === rawMah.trim());
                
                if(item) {
                    const pageUrl = window.location.href;
                    document.title = `${item.mah} Mahallesi, ${item.ilce} Rehberi | Selman Güneş`;
                    
                    document.getElementById('main-title').innerText = item.mah;
                    document.getElementById('banner-text').innerText = item.mah.toUpperCase();
                    
                    // İçerik Oluşturma
                    let text = item.desc || "{mah}, {ilce} ilçesinin gelişmiş bölgelerindendir.";
                    let finalBody = text.split('{mah}').join(item.mah).split('{ilce}').join(item.ilce).split('{il}').join(item.il);
                    document.getElementById('main-content').innerHTML = finalBody;
                    
                    document.getElementById('zip-code').innerText = item.pk || "---";
                    document.getElementById('breadcrumb').innerHTML = `<a href="/">Türkiye</a> > ${item.il} > ${item.ilce} > ${item.mah}`;

                    // HARİTA DÜZELTİLDİ: Template Literal Hatası Giderildi
                    const loc = encodeURIComponent(`${item.mah} ${item.ilce} ${item.il}`);
                    document.getElementById('map-frame').src = `https://maps.google.com/maps?q=${loc}&t=&z=14&ie=UTF8&iwloc=&output=embed`;
                    document.getElementById('btn-route').onclick = () => {
                        window.open(`https://www.google.com/maps/dir/?api=1&destination=${loc}`, '_blank');
                    };

                    // QR Kod
                    document.getElementById("qrcode").innerHTML = "";
                    new QRCode(document.getElementById("qrcode"), { text: pageUrl, width: 110, height: 110 });

                    // FAQ
                    let faqContent = '';
                    if(item.faqs && item.faqs.length > 0) {
                        item.faqs.forEach((f, i) => {
                            faqContent += `
                            <div class="accordion-item" style="background:transparent; border:1px solid rgba(212,175,55,0.2); margin-bottom:10px;">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#q${i}" style="background:rgba(15,23,42,0.8); color:var(--gold); font-weight:700;">
                                    ${f.q}
                                </button>
                                <div id="q${i}" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body text-white-50">${f.a}</div>
                                </div>
                            </div>`;
                        });
                    }
                    document.getElementById('faqAccordion').innerHTML = faqContent;

                    // Yakın Bölgeler
                    const neighbors = data.filter(x => x.ilce === item.ilce && x.mah !== item.mah).slice(0, 15);
                    document.getElementById('neighbor-links').innerHTML = neighbors.map(n => 
                        `<a href="index.html?il=${encodeURIComponent(n.il)}&ilce=${encodeURIComponent(n.ilce)}&mah=${encodeURIComponent(n.mah)}" class="btn btn-sm btn-outline-light m-1">${n.mah}</a>`
                    ).join('');

                } else {
                    document.getElementById('main-title').innerText = "Kayıt Bulunamadı";
                    document.getElementById('main-content').innerText = "Belirtilen ilçe ve mahalle sistemde kayıtlı değil.";
                }
            })
            .catch(err => {
                console.error("Fetch hatası:", err);
                document.getElementById('main-title').innerText = "Veri Hatası";
            });
        }
    </script>
</body>
</html>
