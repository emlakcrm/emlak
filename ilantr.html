<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Basit İlanlar (3 Sütunlu)</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .ilan-kutusu-link {
            text-decoration: none; 
            color: inherit; 
            display: block;
        }
        .ilan-kutusu {
            border: 2px solid #007bff; 
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            background-color: #f0f8ff; 
            transition: background-color 0.2s; 
        }
        .ilan-kutusu:hover {
            background-color: #e6f0ff; 
            cursor: pointer; 
        }
        
        .ilan-baslik {
            color: #333;
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        /* Açıklamayı 3 satırda keser */
        .ilan-aciklama {
            color: #666;
            margin-bottom: 5px;
            display: -webkit-box;
            -webkit-line-clamp: 3; 
            -webkit-box-orient: vertical;
            overflow: hidden; 
        }
        /* İlan bilgisi ve tarih kısımları kaldırıldı (basitlik için) */
        .ilan-bilgi, .ilan-tarih, .ilan-link {
            display: none; 
        }
    </style>
</head>
<body>

    <h1>E-Tablolardan Çekilen Emlak İlanlarımız</h1>
    
    <div id="ilanlar-listesi">
        <p>İlanlar yükleniyor...</p>
    </div>

    <script>
        // * GOOGLE SHEETS LİNKİNİZ BURAYA ENTEGRE EDİLMİŞTİR *
        const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTClx_9DlBcYyCGUNKnmBxvt5f-zKK7PWEFEuFgg7Zk9lR2l2FOlsAoSIrheFT_9dpb1OVYPfh9aNdB/pub?output=csv'; 

        function ilanlariCek() {
            fetch(CSV_URL)
                .then(response => response.text())
                .then(data => {
                    const ilanlar = parseCSV(data); 
                    ilanlariGoster(ilanlar); 
                })
                .catch(error => {
                    document.getElementById('ilanlar-listesi').innerHTML = '<p style="color: red;">İlanlar yüklenirken bir hata oluştu. Lütfen Sheets dosyanızda sadece 3 başlık (Baslik, Aciklama, Facebook_Link) olduğundan ve Paylaşım ayarlarınızın açık olduğundan emin olun.</p>';
                });
        }

        // SADECE 3 SÜTUN OKUNACAK
        function parseCSV(csv) {
            const lines = csv.split('\n').filter(line => line.trim() !== '');
            if (lines.length < 2) return []; 
            
            const headers = lines[0].split(',').map(header => header.trim());
            const ilanlar = [];

            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',');
                if (values.length >= 3) { 
                    const ilan = {};
                    ilan[headers[0]] = values[0].trim(); // Baslik
                    ilan[headers[1]] = values[1].trim(); // Aciklama
                    ilan[headers[2]] = values[2].trim(); // Facebook_Link
                    ilanlar.push(ilan);
                }
            }
            return ilanlar.reverse(); 
        }

        function ilanlariGoster(ilanlar) {
            const container = document.getElementById('ilanlar-listesi');
            const gecerliIlanlar = ilanlar.filter(ilan => ilan.Baslik && ilan.Baslik !== 'Baslik');

            if (gecerliIlanlar.length === 0) {
                 container.innerHTML = '<p>Henüz eklenmiş ilan bulunmamaktadır.</p>';
                return;
            }

            let htmlContent = '';
            
            gecerliIlanlar.forEach(ilan => {
                 htmlContent += `
                    <a href="${ilan.Facebook_Link}" target="_blank" class="ilan-kutusu-link">
                        <div class="ilan-kutusu">
                            <div class="ilan-baslik">${ilan.Baslik}</div>
                            <p class="ilan-aciklama">${ilan.Aciklama}</p>
                        </div>
                    </a>
                `;
            });
            
            container.innerHTML = htmlContent;
        }

        ilanlariCek();
    </script>
</body>
</html>
