- name: Python ile kodları enjekte et
        run: |
          python -c '
          import os, re
          ga_code = """<script async src="https://www.googletagmanager.com/gtag/js?id=G-QL7NLR92NW"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-QL7NLR92NW");</script>"""
          for root, dirs, files in os.walk("."):
              for file in files:
                  if file.endswith(".html"):
                      path = os.path.join(root, file)
                      with open(path, "r", encoding="utf-8") as f:
                          content = f.read()
                      if "G-QL7NLR92NW" not in content:
                          # Hem <head> hem <HEAD> hem de <head ...> durumlarını kapsar
                          new_content = re.sub(r"(<head.*?>)", r"\1\n" + ga_code, content, flags=re.IGNORECASE)
                          with open(path, "w", encoding="utf-8") as f:
                              f.write(new_content)
          '
