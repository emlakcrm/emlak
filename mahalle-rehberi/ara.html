<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mahalle Bul - Selman Güneş</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root { --gold: #d4af37; --dark: #020617; --neon: #00f3ff; }
        body { background: var(--dark); color: #e2e8f0; font-family: 'Inter', sans-serif; padding-top: 100px; }
        .navbar { background: rgba(2, 6, 23, 0.95); border-bottom: 2px solid var(--gold); }
        .nav-link { color: white !important; font-weight: 700; font-size: 0.7rem; text-transform: uppercase; margin: 0 5px; }
        .glass-card { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 40px; padding: 40px; }
        .form-select, .form-control { 
            background: rgba(255,255,255,0.05); 
            border: 1px solid var(--gold); 
            color: white; 
            border-radius: 15px; 
            padding: 15px;
            margin-bottom: 20px;
        }
        .form-select:focus { background: rgba(255,255,255,0.1); color: white; border-color: var(--neon); box-shadow: none; }
        .btn-gold { 
            background: linear-gradient(90deg, #d4af37, #b8860b); 
            color: black; 
            font-weight: 900; 
            padding: 15px 40px; 
            border-radius: 15px; 
            width: 100%;
            text-transform: uppercase;
            transition: 0.3s;
        }
        .btn-gold:hover { transform: scale(1.02); box-shadow: 0 0 20px rgba(212,175,55,0.4); }
        .adsense-placeholder { background: rgba(255,255,255,0.05); border: 2px dashed #444; color: #888; text-align: center; padding: 30px; margin-top: 30px; border-radius: 20px; }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg fixed-top navbar-dark">
        <div class="container-fluid px-lg-5">
            <a class="navbar-brand fw-bold" href="https://selmangunes.com.tr/">SELMAN <span style="color:var(--gold)">GÜNEŞ</span></a>
            <div class="navbar-nav ms-auto d-none d-lg-flex">
                <a class="nav-link" href="https://selmangunes.com.tr/index.html">Ana Sayfa</a>  
                <a class="nav-link" href="https://selmangunes.com.tr/ilanlar.html">İlanlar</a>
                <a class="nav-link" href="https://selmangunes.com.tr/arayis.html">Talep</a>
                <a class="nav-link" href="https://selmangunes.com.tr/bilgi/anasayfa.html">Blog</a>
                <a class="nav-link" href="https://selmangunes.com.tr/blog/anasayfa.html">Rehber</a>  
                <a class="nav-link" href="https://selmangunes.com.tr/borcodeme.html">Borc Yönetimi</a>
                <a class="nav-link" href="https://selmangunes.com.tr/resimler.html">Foto Galeri</a>
                <a class="nav-link" href="https://selmangunes.com.tr/hakkimda.html">Hakkımda</a>  
                <a class="nav-link" href="https://selmangunes.com.tr/diger.html">Diğer İşler</a>
                <a class="nav-link" href="https://selmangunes.com.tr/antalya.html">Antalya</a>
                <a class="nav-link" href="https://selmangunes.com.tr/iletisim.html">İletişim</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6" data-aos="zoom-in">
                <div class="glass-card">
                    <h2 class="text-center mb-4" style="color:var(--gold); font-weight:900;">MAHALLE BUL</h2>
                    <p class="text-center text-white-50 mb-4">Analizini görmek istediğiniz bölgeyi seçin.</p>
                    
                    <label>İl Seçin</label>
                    <select id="il-select" class="form-select">
                        <option value="">İl Seçiniz...</option>
                        <option value="Antalya">Antalya</option>
                        <option value="Istanbul">İstanbul</option>
                        <option value="Ankara">Ankara</option>
                        </select>

                    <label>İlçe Seçin</label>
                    <select id="ilce-select" class="form-select" disabled>
                        <option value="">Önce İl Seçin...</option>
                    </select>

                    <label>Mahalle Seçin</label>
                    <select id="mah-select" class="form-select" disabled>
                        <option value="">Önce İlçe Seçin...</option>
                    </select>

                    <button id="git-btn" class="btn btn-gold mt-3">REHBERİ GÖRÜNTÜLE</button>

                    <div class="adsense-placeholder">-- Reklam Alanı --</div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();

        const ilSelect = document.getElementById('il-select');
        const ilceSelect = document.getElementById('ilce-select');
        const mahSelect = document.getElementById('mah-select');
        const gitBtn = document.getElementById('git-btn');

        // İl seçilince ilçeleri yükle
        ilSelect.addEventListener('change', function() {
            const il = this.value;
            if(!il) return;

            // GitHub'daki data klasöründen o ilin JSON'ını oku
            fetch(`./mahalle-rehberi/data/${il.toLowerCase().replace(/ı/g,'i').replace(/ş/g,'s').replace(/ğ/g,'g').replace(/ü/g,'u').replace(/ö/g,'o').replace(/ç/g,'c')}.json`)
            .then(res => res.json())
            .then(data => {
                // Benzersiz ilçeleri ayıkla
                const ilceler = [...new Set(data.map(item => item.ilce))];
                ilceSelect.innerHTML = '<option value="">İlçe Seçin...</option>';
                ilceler.forEach(i => {
                    ilceSelect.innerHTML += `<option value="${i}">${i}</option>`;
                });
                ilceSelect.disabled = false;
                window.currentData = data; // Veriyi sakla
            });
        });

        // İlçe seçilince mahalleleri yükle
        ilceSelect.addEventListener('change', function() {
            const ilce = this.value;
            const mahalleler = window.currentData.filter(x => x.ilce === ilce);
            mahSelect.innerHTML = '<option value="">Mahalle Seçin...</option>';
            mahalleler.forEach(m => {
                mahSelect.innerHTML += `<option value="${m.mah}">${m.mah}</option>`;
            });
            mahSelect.disabled = false;
        });

        // Butona basınca index.html'e yönlendir
        gitBtn.addEventListener('click', function() {
            const il = ilSelect.value;
            const ilce = ilceSelect.value;
            const mah = mahSelect.value;

            if(il && ilce && mah) {
                window.location.href = `index.html?il=${il}&ilce=${ilce}&mah=${mah}`;
            } else {
                alert("Lütfen tüm seçimleri yapın!");
            }
        });
    </script>
</body>
</html>
